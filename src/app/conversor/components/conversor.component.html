<div class="aviso">
  <nz-alert
    *ngIf="possuiErro"
    nzBanner
    nzType="error"
    [nzMessage]="mensagemDeErro"
  ></nz-alert>
</div>

<div class="selecao">
  <div class="header">
    <h1>Selecione a moeda a ser convertida</h1>
  </div>

  <div class="form">
    <form autocomplete="off" #conversaoForm="ngForm" class="inputs">
      <nz-select
        nzShowSearch
        nzAllowClear
        nzPlaceHolder="De"
        name="moedaDe"
        [(ngModel)]="conversao.moedaDe"
        required
      >
        <nz-option
          *ngFor="let moeda of moedas"
          nzCustomContent
          [nzLabel]="'(' + moeda.simbolo + ')' + ' ' + moeda.sigla"
          [nzValue]="moeda.sigla"
          required
        >
          {{ moeda.descricao }}
        </nz-option>
      </nz-select>

      <input
        nz-input
        name="valor"
        [(ngModel)]="conversao.valor"
        [dropSpecialCharacters]="false"
        mask="0*.00"
        style="width: 100px; text-align: right"
        placeholder="0"
        required
      />

      <i nz-icon nzType="arrow-right" nzTheme="outline"></i>

      <nz-select
        nzShowSearch
        nzAllowClear
        nzPlaceHolder="Para"
        name="moedaPara"
        [(ngModel)]="conversao.moedaPara"
        required
      >
        <nz-option
          *ngFor="let moeda of moedas"
          nzCustomContent
          [nzLabel]="'(' + moeda.simbolo + ')' + ' ' + moeda.sigla"
          [nzValue]="moeda.sigla"
        >
          {{ moeda.descricao }}
        </nz-option>
      </nz-select>
    </form>

    <button
      nz-button
      nzType="default"
      nzShape="circle"
      (click)="converter()"
      [nzLoading]="loading"
      [disabled]="!conversaoForm.form.valid"
    >
      <i nz-icon nzType="search"></i>
    </button>
  </div>
</div>

<nz-modal
  [(nzVisible)]="modalAberto && !possuiErro"
  nzTitle="Cotação em: [DATA]"
  nzClosable="false"
  nzCancelText="Fechar"
  (nzOnCancel)="sairEOutraConsulta()"
  nzOkText="Fazer outra consulta"
  (nzOnOk)="sairEOutraConsulta()"
>
  <ng-container *nzModalContent> [RESPONSE] </ng-container>
</nz-modal>
